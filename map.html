<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explore Map - Threading Histories</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Leaflet MarkerCluster CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/map.css">
</head>
<script>
function copyCitation() {
    const citation = "Grimes, Bryttany. (2026). Threading Histories: Nigerian Women's Textile Traditions Dataset (Version 1.0.0) [Data set]. CHI Fellowship, Michigan State University. https://threadinghistories.org";
    
    navigator.clipboard.writeText(citation).then(function() {
        // Success feedback
        const btn = event.target.closest('.copy-citation');
        const originalHTML = btn.innerHTML;
        btn.innerHTML = '<i class="bi bi-check"></i> Copied!';
        btn.classList.add('text-success');
        
        setTimeout(function() {
            btn.innerHTML = originalHTML;
            btn.classList.remove('text-success');
        }, 2000);
    }).catch(function(err) {
        alert('Failed to copy citation. Please copy manually.');
    });
}
</script>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #2C5F5D;">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <h1 class="mb-0">Threading Histories</h1>
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="map.html">Interactive Map</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="repository.html">Textile Repository</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="methodology.html">Methodology</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="bibliography.html">Bibliography</a>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="spotlight.html">Community Spotlight</a></li>
                    <li class="nav-item"><a class="nav-link" href="community.html">Community Outreach</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Map Container -->
    <div class="container-fluid p-0">
        <div class="row g-0">
            
            <!-- Left Sidebar: Filters and Legend -->
            <div class="col-md-3 col-lg-2 map-sidebar" id="filterSidebar">
                <div class="sidebar-content p-3">
                    <h4 style="color: #2C5F5D;">Map Controls</h4>
                    
                    <!-- Time Period Filter -->
                    <div class="filter-section mb-4">
                        <h5>Time Period</h5>
                        <select class="form-select" id="timePeriodSelect">
                            <option value="all">All Periods</option>
                            <option value="1850-1885">1850-1885</option>
                            <option value="1885-1920">1885-1920</option>
                            <option value="1920-1960">1920-1960</option>
                        </select>
                    </div>

                    <!-- Craft Type Filter -->
                    <div class="filter-section mb-4">
                        <h5>Craft Type</h5>
                        <div class="form-check">
                            <input class="form-check-input craft-filter" type="checkbox" value="Dyeing" id="dyeing" checked>
                            <label class="form-check-label" for="dyeing">Dyeing</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input craft-filter" type="checkbox" value="Weaving" id="weaving" checked>
                            <label class="form-check-label" for="weaving">Weaving</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input craft-filter" type="checkbox" value="Embroidery" id="embroidery" checked>
                            <label class="form-check-label" for="embroidery">Embroidery</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input craft-filter" type="checkbox" value="Basketry" id="basketry" checked>
                            <label class="form-check-label" for="basketry">Basketry</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input craft-filter" type="checkbox" value="Beadwork" id="beadwork" checked>
                            <label class="form-check-label" for="beadwork">Beadwork</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input craft-filter" type="checkbox" value="Pottery" id="pottery" checked>
                            <label class="form-check-label" for="pottery">Pottery</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input craft-filter" type="checkbox" value="Leatherwork" id="leatherwork" checked>
                            <label class="form-check-label" for="leatherwork">Leatherwork</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input craft-filter" type="checkbox" value="Textile Printing" id="textile-printing" checked>
                            <label class="form-check-label" for="textile-printing">Textile Printing</label>
                        </div>
                    </div>

                    <!-- Ethnolinguistic Group Filter -->
                    <div class="filter-section mb-4">
                        <h5>Ethnic Group</h5>
                        <div class="form-check">
                            <input class="form-check-input ethnic-filter" type="checkbox" value="Yoruba" id="yoruba" checked>
                            <label class="form-check-label" for="yoruba">Yoruba</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input ethnic-filter" type="checkbox" value="Igbo" id="igbo" checked>
                            <label class="form-check-label" for="igbo">Igbo</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input ethnic-filter" type="checkbox" value="Hausa" id="hausa" checked>
                            <label class="form-check-label" for="hausa">Hausa</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input ethnic-filter" type="checkbox" value="Fulani" id="fulani" checked>
                            <label class="form-check-label" for="fulani">Fulani</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input ethnic-filter" type="checkbox" value="Edo" id="edo" checked>
                            <label class="form-check-label" for="edo">Edo</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input ethnic-filter" type="checkbox" value="Other" id="other" checked>
                            <label class="form-check-label" for="other">Other Groups</label>
                        </div>
                    </div>

                    <!-- Status Legend -->
                    <div class="filter-section">
                        <h5>Status Legend</h5>
                        <div class="legend-item">
                            <span class="status-indicator" style="background-color: #16736d;"></span> Thriving
                        </div>
                        <div class="legend-item">
                            <span class="status-indicator" style="background-color: #b8956a;"></span> Stable
                        </div>
                        <div class="legend-item">
                            <span class="status-indicator" style="background-color: #d97655;"></span> Declining
                        </div>
                        <div class="legend-item">
                            <span class="status-indicator" style="background-color: #6b6b6b;"></span> Disappeared
                        </div>
                    </div>

                    <!-- Reset Button -->
                    <button class="btn btn-custom mt-3 w-100" id="resetFilters">Reset All Filters</button>
                </div>
            </div>

            <!-- Right Side: Map Area -->
            <div class="col-md-9 col-lg-10">
                <!-- Map Container -->
                <div id="map"></div>
                
                <!-- Temporal Slider -->
                <div class="temporal-slider" id="temporalSlider">
                    <div class="slider-content">
                        <label for="yearSlider">
                            <strong>Time Period:</strong> 
                            <span id="currentYear">1850-1960</span>
                        </label>
                        <input type="range" class="form-range" id="yearSlider" 
                               min="1850" max="1960" step="10" value="1850">
                        <div class="slider-marks">
                            <span>1850</span>
                            <span>1885</span>
                            <span>1920</span>
                            <span>1960</span>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
    </div>

    <!-- Detail Sidebar (slides in from right when marker clicked) -->
    <div class="detail-sidebar" id="detailSidebar">
        <button class="close-btn" id="closeSidebar">&times;</button>
        <div class="detail-content" id="detailContent">
            <!-- Content will be dynamically inserted by JavaScript -->
        </div>
    </div>
<section class="data-download-section py-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center mb-4">
                <h2 class="section-title">Download Open Data</h2>
                <p class="lead">Access the complete Threading Histories dataset in multiple formats. All data is licensed under CC BY 4.0 for reuse with attribution.</p>
            </div>
        </div>

        <div class="row g-4">
            <!-- GeoJSON Download Card -->
            <div class="col-md-4">
                <div class="download-card">
                    <div class="download-icon geojson">
                        <i class="bi bi-globe"></i>
                    </div>
                    <h4>GeoJSON</h4>
                    <p class="text-muted">For GIS applications and web mapping</p>
                    <ul class="format-details">
                        <li>Spatial data with coordinates</li>
                        <li>Works with QGIS, Leaflet, Mapbox</li>
                        <li>WGS84 coordinate system</li>
                        <li>~28 KB</li>
                    </ul>
                    <a href="data/threading_histories_dataset.geojson" download class="btn btn-primary btn-download">
                        <i class="bi bi-download"></i> Download GeoJSON
                    </a>
                </div>
            </div>

            <!-- CSV Download Card -->
            <div class="col-md-4">
                <div class="download-card">
                    <div class="download-icon csv">
                        <i class="bi bi-file-spreadsheet"></i>
                    </div>
                    <h4>CSV</h4>
                    <p class="text-muted">For spreadsheets and statistical analysis</p>
                    <ul class="format-details">
                        <li>Opens in Excel, Google Sheets</li>
                        <li>Compatible with R, Python, SPSS</li>
                        <li>UTF-8 encoded</li>
                        <li>~5 KB</li>
                    </ul>
                    <a href="data/threading_histories_dataset.csv" download class="btn btn-primary btn-download">
                        <i class="bi bi-download"></i> Download CSV
                    </a>
                </div>
            </div>

            <!-- JSON Download Card -->
            <div class="col-md-4">
                <div class="download-card">
                    <div class="download-icon json">
                        <i class="bi bi-code-square"></i>
                    </div>
                    <h4>JSON</h4>
                    <p class="text-muted">For web applications and programming</p>
                    <ul class="format-details">
                        <li>Structured data format</li>
                        <li>Works with JavaScript, Python</li>
                        <li>Easy to parse and process</li>
                        <li>~28 KB</li>
                    </ul>
                    <a href="data/threading_histories_dataset.json" download class="btn btn-primary btn-download">
                        <i class="bi bi-download"></i> Download JSON
                    </a>
                </div>
            </div>
        </div>

        <!-- Metadata & Documentation Row -->
        <div class="row mt-4">
            <div class="col-lg-8 mx-auto">
                <div class="metadata-card">
                    <div class="row align-items-center">
                        <div class="col-md-2 text-center">
                            <i class="bi bi-book metadata-icon"></i>
                        </div>
                        <div class="col-md-7">
                            <h5 class="mb-1">Data Dictionary & Metadata</h5>
                            <p class="mb-0 text-muted">Complete documentation of field definitions, methodology, and usage guidelines</p>
                        </div>
                        <div class="col-md-3 text-md-end">
                            <a href="data/DATA_DICTIONARY.md" download class="btn btn-outline-primary">
                                <i class="bi bi-download"></i> Download
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Usage Information -->
        <div class="row mt-5">
            <div class="col-lg-10 mx-auto">
                <div class="usage-info">
                    <h4>Usage & Citation</h4>
                    <p><strong>License:</strong> Creative Commons Attribution 4.0 International (CC BY 4.0)</p>
                    <p><strong>Citation:</strong></p>
                    <div class="citation-box">
                        <code>
                            Grimes, Bryttany. (2026). Threading Histories: Nigerian Women's Textile Traditions Dataset (Version 1.0.0) [Data set]. CHI Fellowship, Michigan State University. https://threadinghistories.org
                        </code>
                        <button class="btn btn-sm btn-link copy-citation" onclick="copyCitation()">
                            <i class="bi bi-clipboard"></i> Copy
                        </button>
                    </div>
                    <p class="mt-3"><strong>Please:</strong></p>
                    <ul>
                        <li>Provide proper attribution when using this data</li>
                        <li>Link back to threadinghistories.org</li>
                        <li>Indicate if you've modified the data</li>
                        <li>Share your work with usâ€”we'd love to see what you create!</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Version Information -->
        <div class="row mt-4">
            <div class="col-lg-10 mx-auto text-center">
                <p class="text-muted small">
                    <strong>Current Version:</strong> 1.0.0 | 
                    <strong>Last Updated:</strong> January 31, 2026 | 
                    <strong>Total Records:</strong> 12 locations
                </p>
            </div>
        </div>
    </div>
</section>

    <!-- Footer -->
    <footer class="text-center text-white py-4 mt-5" style="background-color: #2C5F5D;">
        <div class="container">
            <p class="mb-2">&copy; 2026 Threading Histories | CHI Fellowship Project</p>
            <p class="mb-0">Contact: grimesb4@msu.edu</p>
        </div>
    </footer>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- Leaflet MarkerCluster JavaScript -->
    <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
    
    <!-- Custom Map JavaScript -->
    <script src="js/map.js"></script>
</body>
</html>